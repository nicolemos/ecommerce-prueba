<html>
  <head>
    <style>
      .video-container {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 500px;
      }
      .video-frame {
        width: 80%;
        height: 100%;
        border: 1px solid black;
      }
      .related-videos {
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
        width: 100%;
        border: 1px solid black;
        overflow-y: scroll;
        padding: 10px;
      }
      .related-video {
        margin-bottom: 10px;
      }
      .related-video img {
        width: 100%;
      }
    </style>
  </head>
  <body>
    <div class="video-container">
      <iframe class="video-frame" src="https://www.youtube.com/embed/Fo_DPWW7uOs"></iframe>
    </div>
    <div class="related-videos"></div>
  </body>
  <script>
    const API_KEY = "AIzaSyByZE_jSQMPVpXFlN-KGYdFybNefXiR580";
    const playlistId = "PL-Mlm_HYjCo_4ysYkNoYVYhnktfzCruSV";
    const videoId = "Fo_DPWW7uOs";
    const channelId = "UCKaa9SPITNARrLDvX2olvrA"
    const relatedVideosContainer = document.querySelector(".related-videos");
    let curso = {};
    
    fetch(
      `https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&channelId=${channelId}&playlistId=${playlistId}&maxResults=11&key=${API_KEY}`
    )
      .then(response => response.json())
      .then(data => {
        console.log(data);
        curso.id_video = data.items[0].snippet.resourceId.videoId;
        curso.titulo_video = data.items[0].snippet.title;
        curso.descripcion_video = data.items[0].snippet.description;
        curso.miniatura_video = data.items[0].snippet.thumbnails.high.url;
        curso.precio = 30;
        curso.url = []
        console.log(curso);
        data.items.forEach(item => {
          console.log(item.snippet.title)
          const relatedVideo = document.createElement("div");
          relatedVideo.classList.add("related-video");

          //const relatedVideoThumb = JSON.stringify(document.createElement("img"));
          const relatedVideoThumb = document.createElement("img");
          relatedVideoThumb.src = item.snippet.thumbnails.high.url;
          relatedVideo.appendChild(relatedVideoThumb);

          relatedVideosContainer.appendChild(relatedVideo);

          curso.url.push({
            id_video : item.snippet.resourceId.videoId,
            titulo_video : item.snippet.title,
            descripcion_video : item.snippet.description,
          });
          
        });
        jsonCurso = JSON.stringify(curso);
        console.log(jsonCurso)
      });
      
      /*
    
      fetch(
      `https://www.googleapis.com/youtube/v3/search?part=snippet&relatedToVideoId=${videoId}&type=video&key=${API_KEY}`
    )
      .then(response => response.json())
      .then(data => {
        console.log(data);
        data.items.forEach(item => {
          const relatedVideo = document.createElement("div");
          relatedVideo.classList.add("related-video");

          const relatedVideoThumb = document.createElement("img");
          relatedVideoThumb.src = item.snippet.thumbnails.default.url;
          relatedVideo.appendChild(relatedVideoThumb);

          relatedVideosContainer.appendChild(relatedVideo);

        });
      });
    */
  </script>
</html>